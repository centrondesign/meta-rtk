From cb4083f94bb00d214ed731671bec6f96be22110e Mon Sep 17 00:00:00 2001
From: Edgar Lee <cylee12@realtek.com>
Date: Tue, 12 Nov 2024 14:26:46 +0800
Subject: [PATCH] cpufreq: add rtk-cpufreq-dt for rtd1319d with
 get/target_intermediate

Change-Id: Ieaec9dc7c1ffa2261cae8f0bf505f9d53f93d319
---
 drivers/cpufreq/Kconfig.arm          |  6 +++
 drivers/cpufreq/Makefile             |  1 +
 drivers/cpufreq/cpufreq-dt-platdev.c |  2 +
 3 files changed, 78 insertions(+)

diff --git a/drivers/cpufreq/Kconfig.arm b/drivers/cpufreq/Kconfig.arm
index 954749afb5fe..4df3c15adf70 100644
--- a/drivers/cpufreq/Kconfig.arm
+++ b/drivers/cpufreq/Kconfig.arm
@@ -357,3 +357,9 @@ config ARM_PXA2xx_CPUFREQ
 	  This add the CPUFreq driver support for Intel PXA2xx SOCs.
 
 	  If in doubt, say N.
+
+config ARM_RTK_CPUFREQ_DT
+	tristate "Realtek cpufreq support"
+	depends on ARCH_REALTEK
+	help
+	  This adds cpufreq driver support for Realtek SoCs based on cpufreq-dt.
diff --git a/drivers/cpufreq/Makefile b/drivers/cpufreq/Makefile
index 48ee5859030c..deb4b5011905 100644
--- a/drivers/cpufreq/Makefile
+++ b/drivers/cpufreq/Makefile
@@ -85,6 +85,7 @@ obj-$(CONFIG_ARM_TEGRA186_CPUFREQ)	+= tegra186-cpufreq.o
 obj-$(CONFIG_ARM_TEGRA194_CPUFREQ)	+= tegra194-cpufreq.o
 obj-$(CONFIG_ARM_TI_CPUFREQ)		+= ti-cpufreq.o
 obj-$(CONFIG_ARM_VEXPRESS_SPC_CPUFREQ)	+= vexpress-spc-cpufreq.o
+obj-$(CONFIG_ARM_RTK_CPUFREQ_DT)	+= rtk-cpufreq-dt.o
 
 
 ##################################################################################
diff --git a/drivers/cpufreq/cpufreq-dt-platdev.c b/drivers/cpufreq/cpufreq-dt-platdev.c
index 48ca7189a73b..b1e735f5cb71 100644
--- a/drivers/cpufreq/cpufreq-dt-platdev.c
+++ b/drivers/cpufreq/cpufreq-dt-platdev.c
@@ -163,6 +163,8 @@ static const struct of_device_id blocklist[] __initconst = {
 	{ .compatible = "qcom,msm8974", },
 	{ .compatible = "qcom,msm8960", },
 
+	{ .compatible = "realtek,rtd1319d", },
+
 	{ }
 };
 
-- 
2.47.0

